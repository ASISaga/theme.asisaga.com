<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Header Visibility Test - Genesis Theme</title>
  <style>
    /* Minimal CSS to test custom elements and header visibility */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #0a0a0a;
      color: #f5f5f5;
      min-height: 100vh;
    }
    
    /* CRITICAL: Custom element reset (from _sass/base/layout/_layout.scss) */
    genesis-header,
    genesis-atmosphere,
    genesis-ambient {
      display: block;
      width: 100%;
    }
    
    /* Genesis Header with surface-glass entity simulation */
    genesis-header {
      position: sticky;
      top: 0;
      z-index: 1000;
      min-height: 70px;
      
      /* surface-glass entity variant */
      background: oklch(0.15 0.02 250 / 0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid oklch(0.25 0.02 250);
      box-shadow: 0 2px 8px oklch(0.05 0.01 250 / 0.3);
    }
    
    .genesis-header__container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      height: 100%;
    }
    
    .genesis-header__brand {
      display: flex;
      align-items: center;
      gap: 1rem;
      text-decoration: none;
      color: #f5f5f5;
      min-height: 44px;
    }
    
    .genesis-header__logo {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: oklch(0.30 0.05 250);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    
    .genesis-header__title {
      font-size: 1.25rem;
      font-weight: 600;
      color: oklch(0.99 0.005 90);  /* White text on dark background */
      transition: color 0.3s ease;
    }
    
    .genesis-header__brand:hover .genesis-header__title {
      color: oklch(0.75 0.25 230);  /* Neon blue on hover */
    }
    
    /* Main content */
    genesis-atmosphere {
      min-height: calc(100vh - 70px);
    }
    
    .test-section {
      min-height: 100vh;
      padding: 4rem 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .test-section:nth-child(even) {
      background: rgba(100, 100, 255, 0.03);
    }
    
    .test-content {
      max-width: 800px;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 1rem;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .test-content h1 {
      color: oklch(0.99 0.005 90);
      margin-bottom: 1rem;
    }
    
    .test-content h2 {
      color: oklch(0.85 0.15 230);
      margin-bottom: 1rem;
    }
    
    .test-content ul {
      margin: 1rem 0;
      padding-left: 2rem;
    }
    
    .test-content li {
      margin: 0.5rem 0;
    }
    
    .status-indicator {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.9);
      border-radius: 0.5rem;
      font-family: monospace;
      font-size: 0.9rem;
      z-index: 999;
      border: 1px solid #333;
      max-width: 300px;
    }
    
    .status-good {
      color: #51cf66;
    }
    
    .status-bad {
      color: #ff6b6b;
    }
    
    .status-label {
      font-weight: bold;
      margin-bottom: 0.5rem;
      color: #6b9fff;
    }
  </style>
</head>
<body>
  <!-- Custom Element: genesis-header -->
  <genesis-header sticky="true">
    <header class="genesis-header">
      <div class="genesis-header__container">
        <!-- Brand / Logo -->
        <a class="genesis-header__brand" href="/" aria-label="ASI Saga Theme - Home">
          <div class="genesis-header__logo">AS</div>
          <div class="genesis-header__text">
            <span class="genesis-header__title">ASI Saga Theme</span>
          </div>
        </a>
      </div>
    </header>
  </genesis-header>
  
  <!-- Custom Element: genesis-atmosphere -->
  <genesis-atmosphere vibe="neutral">
    <main id="skip-target" tabindex="-1">
      <!-- Test Content -->
      <div class="test-section">
        <div class="test-content">
          <h1>✅ Header Visibility Test</h1>
          <div class="status-label">Testing:</div>
          <ul>
            <li class="status-good">✅ Custom element &lt;genesis-header&gt; displays as block</li>
            <li class="status-good">✅ Header has 70px minimum height</li>
            <li class="status-good">✅ Dark glassmorphism background visible</li>
            <li class="status-good">✅ White text on dark background (high contrast)</li>
            <li class="status-good">✅ Logo and title clearly visible</li>
            <li class="status-good">✅ Sticky positioning works</li>
          </ul>
          <p><strong>Scroll down to test sticky behavior ↓</strong></p>
        </div>
      </div>
      
      <div class="test-section">
        <div class="test-content">
          <h2>Section 2: Custom Element Reset</h2>
          <p>The custom element <code>&lt;genesis-header&gt;</code> now has:</p>
          <ul>
            <li><strong>display: block</strong> - No longer inline (0px height)</li>
            <li><strong>width: 100%</strong> - Full width container</li>
            <li><strong>surface-glass entity</strong> - Dark glassmorphism background</li>
          </ul>
          <p>This ensures the browser treats it as a proper block-level element.</p>
        </div>
      </div>
      
      <div class="test-section">
        <div class="test-content">
          <h2>Section 3: Entity Variant Update</h2>
          <p>Changed from <code>genesis-entity('primary')</code> to <code>genesis-entity('surface-glass')</code>:</p>
          <ul>
            <li><strong>Before:</strong> White background (oklch(0.99 0.005 90)) with white text = invisible!</li>
            <li><strong>After:</strong> Dark background (oklch(0.15 0.02 250 / 0.85)) with white text = visible!</li>
          </ul>
        </div>
      </div>
      
      <div class="test-section">
        <div class="test-content">
          <h2>Section 4: Spatial Engine Fix</h2>
          <p>Removed <code>genesis-environment('navigation-primary')</code> from header wrapper:</p>
          <ul>
            <li><strong>Issue:</strong> navigation-primary applies <code>left: -100%</code> on mobile</li>
            <li><strong>Fix:</strong> Only navigation menu (<code>__nav</code>) should use that mixin</li>
            <li><strong>Result:</strong> Header wrapper no longer hidden on mobile</li>
          </ul>
        </div>
      </div>
      
      <div class="test-section">
        <div class="test-content">
          <h2>Section 5: Visual Verification</h2>
          <p>Scroll to the top to verify:</p>
          <ul>
            <li>✅ Header is sticky and follows scroll</li>
            <li>✅ Minimum 70px height maintained</li>
            <li>✅ Dark glassmorphism effect visible</li>
            <li>✅ White text clearly readable</li>
            <li>✅ No layout shifts or collapse</li>
          </ul>
        </div>
      </div>
    </main>
  </genesis-atmosphere>
  
  <!-- Status Indicator -->
  <div class="status-indicator">
    <div class="status-label">Header Status</div>
    <div>Custom Element: <span class="status-good">✅ Block</span></div>
    <div>Min Height: <span class="status-good">✅ 70px</span></div>
    <div>Background: <span class="status-good">✅ Dark Glass</span></div>
    <div>Text Color: <span class="status-good">✅ White</span></div>
    <div>Visibility: <span class="status-good">✅ Visible</span></div>
  </div>
  
  <script>
    // Verify custom element display on load
    window.addEventListener('DOMContentLoaded', function() {
      const header = document.querySelector('genesis-header');
      if (header) {
        const styles = window.getComputedStyle(header);
        console.log('genesis-header display:', styles.display);
        console.log('genesis-header width:', styles.width);
        console.log('genesis-header height:', styles.height);
        console.log('genesis-header background:', styles.background);
        
        // Verify it's not inline (0px height)
        if (styles.display === 'block' || styles.display === 'flex') {
          console.log('✅ Custom element displays correctly as block-level element');
        } else {
          console.warn('❌ Custom element still displays as inline!');
        }
      }
    });
  </script>
</body>
</html>
