/**
 * SENSORY TEXTURE - Atmosphere Vibes
 * --------------------------------------------------------------------------
 * Defines the "Feeling" or "Vibe" of the node without describing visuals.
 * 
 * This is part of the Engine Layer where raw CSS properties are allowed.
 * All values MUST use CSS custom properties defined in the design token system.
 */

// ============================================================================
// ATMOSPHERE ENGINE - Sensory Texture
// ============================================================================
@mixin _theme-engine-atmosphere($vibe) {
  @if $vibe == 'neutral' {
    // Standard system transparency
    // No additional styling needed - base state
  }
  @else if $vibe == 'ethereal' {
    // High-transparency, light-based focus
    backdrop-filter: blur(30px) saturate(1.5) brightness(1.1);
    background: var(--atmosphere-ethereal, oklch(0.98 0.01 90 / 0.05));
    box-shadow: inset 0 0 40px var(--glow-ethereal, oklch(0.98 0.01 90 / 0.1));
  }
  @else if $vibe == 'void' {
    // Deep-space, profound black, ultra high-contrast
    background: var(--atmosphere-void, oklch(0.05 0.01 250));
    color: var(--text-inverse, oklch(0.99 0.005 90));
    box-shadow: 
      inset 0 0 60px var(--void-deep, oklch(0.03 0.01 260)),
      0 4px 20px oklch(0.03 0.01 260 / 0.8);
    border-bottom: 1px solid oklch(0.65 0.25 230 / 0.3);  /* Neon blue accent */
  }
  @else if $vibe == 'vibrant' {
    // High-energy, data-saturated, high-neon
    background: var(--atmosphere-vibrant, oklch(0.20 0.06 245 / 0.9));
    border: 2px solid var(--accent-neon, oklch(0.88 0.18 95));
    box-shadow: 
      0 0 20px var(--accent-neon, oklch(0.88 0.18 95 / 0.3)),
      inset 0 0 30px var(--accent-neural, oklch(0.55 0.25 290 / 0.2));
    backdrop-filter: blur(20px) saturate(2);
  }
  @else if $vibe == 'spacious-mobile' {
    // Content that needs generous spacing on mobile for touch-friendliness
    // Mobile: generous spacing
    @media (max-width: 767px) {
      padding: 3rem 1.5rem;
      margin-bottom: 2.5rem;
      
      > * + * {
        margin-top: 1.5rem;
      }
    }
    
    // Tablet: moderate spacing
    @media (min-width: 768px) and (max-width: 1023px) {
      padding: 2.5rem 2rem;
      margin-bottom: 2rem;
      
      > * + * {
        margin-top: 1.25rem;
      }
    }
    
    // Desktop: compact
    @media (min-width: 1024px) {
      padding: 2rem 3rem;
      margin-bottom: 1.5rem;
      
      > * + * {
        margin-top: 1rem;
      }
    }
  }
  @else if $vibe == 'dense-desktop' {
    // Content that benefits from high information density on large screens
    // Mobile: minimal density (single column, simple)
    @media (max-width: 767px) {
      > * {
        width: 100%;
        margin-bottom: 1rem;
      }
    }
    
    // Tablet: moderate density (2 columns)
    @media (min-width: 768px) and (max-width: 1023px) {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
    
    // Desktop: high density (auto-fit grid)
    @media (min-width: 1024px) {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }
    
    // Ultrawide: cap at 4 columns
    @media (min-width: 1920px) {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  @else if $vibe == 'viewport-aware' {
    // Content sized relative to viewport (hero sections)
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    
    // Use modern dynamic viewport height (accounts for mobile browser chrome)
    min-height: 100vh;
    min-height: 100dvh; // Dynamic viewport height for mobile
    
    // Mobile: reduce height to account for browser chrome
    @media (max-width: 767px) {
      min-height: 70vh;
      min-height: 70dvh;
      padding: 2rem 1rem;
    }
    
    // Tablet: moderate viewport usage
    @media (min-width: 768px) and (max-width: 1023px) {
      min-height: 85vh;
      min-height: 85dvh;
      padding: 3rem 2rem;
    }
    
    // Desktop: full viewport
    @media (min-width: 1024px) {
      min-height: 100vh;
      min-height: 100dvh;
      padding: 4rem 3rem;
    }
    
    // Prevent content overflow on short viewports
    @media (max-height: 600px) {
      min-height: auto;
      padding: 3rem 1rem;
    }
  }
}

// ============================================================================
// ANIMATIONS (Supporting the Engines)
// ============================================================================
@keyframes pulse-border {
  0%, 100% {
    border-color: var(--accent-neon, oklch(0.88 0.18 95));
    box-shadow: 0 0 20px var(--accent-neon, oklch(0.88 0.18 95 / 0.5));
  }
  50% {
    border-color: var(--accent-neural, oklch(0.55 0.25 290));
    box-shadow: 0 0 30px var(--accent-neural, oklch(0.55 0.25 290 / 0.7));
  }
}

@keyframes evolving-sweep {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}
