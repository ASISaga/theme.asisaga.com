/**
 * Modern Collapse Styles
 * Replaces Bootstrap collapse CSS with modern equivalents
 */

.collapse {
  display: none;
  
  &.show {
    display: block;
  }
}

// Collapsing transition
.collapsing {
  height: 0;
  overflow: hidden;
  transition: height 0.35s ease;
}

// Accordion styles
.accordion {
  contain: layout style;
  isolation: isolate;
}

.accordion-item {
  background-color: #fff;
  border: 1px solid rgba(0, 0, 0, 0.125);

  &:not(:first-child) {
    border-top: 0;
  }

  &:first-child {
    border-top-left-radius: var(--border-radius, 0.25rem);
    border-top-right-radius: var(--border-radius, 0.25rem);
  }

  &:last-child {
    border-bottom-left-radius: var(--border-radius, 0.25rem);
    border-bottom-right-radius: var(--border-radius, 0.25rem);
  }
}

.accordion-header {
  margin: 0;
}

.accordion-button {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 1rem 1.25rem;
  font-size: var(--font-size-base, 1rem);
  color: $text-color;
  text-align: left;
  background-color: #fff;
  border: 0;
  border-radius: 0;
  overflow-anchor: none;
  transition: var(--transition-base, all 0.3s ease);
  cursor: pointer;
  // MANDATORY: Touch target minimum 44px
  min-height: 44px;

  &::after {
    flex-shrink: 0;
    width: 1.25rem;
    height: 1.25rem;
    margin-left: auto;
    content: "";
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23212529'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-size: 1.25rem;
    transition: transform 0.2s ease-in-out;
  }

  &:not(.collapsed) {
    color: $cosmic-deep-blue;
    background-color: rgba($cosmic-deep-blue, 0.05);

    &::after {
      transform: rotate(180deg);
    }
  }

  &:hover {
    background-color: rgba($cosmic-deep-blue, 0.08);
  }

  &:focus-visible {
    outline: 0;
    box-shadow: 0 0 0 var(--focus-ring-width, 0.25rem) var(--focus-ring-color);
    z-index: 3;
  }

  &.collapsed {
    border-bottom-left-radius: var(--border-radius, 0.25rem);
    border-bottom-right-radius: var(--border-radius, 0.25rem);
  }
}

.accordion-body {
  padding: 1rem 1.25rem;
}

// Flush variant
.accordion-flush {
  .accordion-item {
    border-right: 0;
    border-left: 0;
    border-radius: 0;

    &:first-child {
      border-top: 0;
    }

    &:last-child {
      border-bottom: 0;
    }
  }
}
