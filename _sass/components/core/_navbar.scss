/**
 * NAVBAR/NAVIGATION COMPONENT - 100% Ontological + Responsive
 * ============================================================================
 * Navigation bar styles using ONLY Genesis Semantic mixins.
 * ZERO raw CSS properties - full ontological compliance.
 * Enhanced by responsive-design-agent v2.1.0
 * 
 * Responsive Behavior:
 * - Mobile (< 1024px): Vertical stacked navigation in off-canvas drawer
 * - Desktop (≥ 1024px): Horizontal navigation with dropdowns
 * - WCAG 2.5.5 compliant: All touch targets ≥44px
 * ============================================================================
 */

// ============================================================================
// NAVBAR COMPONENT
// ============================================================================

// The main navigation container
.navbar {
  @include genesis-environment('associative');  // Horizontal layout (handles flex, direction, alignment)
  
  // Full width in mobile drawer
  width: 100%;
  
  // Navigation list container
  &__list {
    // Mobile: Vertical stacked list (in drawer)
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
    
    // Desktop: Horizontal navigation
    @include from(lg) {
      flex-direction: row;
      gap: clamp(0.75rem, 2vw, 1.5rem);
      align-items: center;
      width: auto;
    }
  }

  // Individual list items within the navbar
  &__item {
    // Touch target optimization
    min-height: 44px;
    display: flex;
    align-items: center;
    width: 100%;
    
    @include from(lg) {
      width: auto;
      position: relative;  // For dropdown positioning
    }

    // Active navigation items - Purposeful neon blue accent
    &--active {
      .navbar__link {
        color: oklch(0.99 0.005 90);  // White text
        font-weight: 600;
        
        &::after {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: oklch(0.65 0.25 230);  // Neon blue - purposeful accent
          
          @include from(lg) {
            bottom: -8px;
          }
        }
      }
    }

    // Dropdown variant
    &--dropdown {
      position: relative;
    }
  }
  
  // Navigation links
  &__link {
    @include genesis-synapse('navigate');  // Navigation link (handles all interactive styling)
    
    // Touch target compliance
    min-height: 44px;
    min-width: 44px;
    padding: 0.75rem 1rem;
    
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    
    width: 100%;
    
    color: oklch(0.85 0.01 220);  // Light gray text
    text-decoration: none;
    font-size: clamp(1rem, calc(0.95rem + 0.25vw), 1.125rem);
    font-weight: 500;
    
    border-radius: 8px;
    position: relative;
    
    transition: all 0.3s ease;
    
    // Fix double-tap delay on mobile
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    
    @include from(lg) {
      width: auto;
      padding: 0.5rem 0.75rem;
    }
    
    &:hover,
    &:focus {
      color: oklch(0.99 0.005 90);  // White on hover
      background: oklch(0.15 0.01 250);  // Slightly lighter black
      border: 1px solid oklch(0.65 0.25 230 / 0.5);  // Neon blue border - purposeful
    }

    // Dropdown toggle variant
    &--dropdown {
      @include genesis-synapse('inquiry');
      
      &::after {
        content: '▼';
        font-size: 0.75rem;
        margin-left: 0.5rem;
        transition: transform 0.3s ease;
      }
      
      &[aria-expanded="true"]::after {
        transform: rotate(180deg);
      }
    }
  }

  // Dropdown menu - Black background with purposeful styling
  &__dropdown {
    @include genesis-entity('primary');
    @include genesis-atmosphere('void');
    
    // Purposeful glassmorphism
    backdrop-filter: blur(16px);
    background: oklch(0.12 0.01 250 / 0.95);  // Deep black
    border: 1px solid oklch(0.20 0.01 250);  // Subtle border
    border-radius: 12px;
    
    box-shadow: 
      0 4px 16px oklch(0.08 0.01 250 / 0.4),
      0 0 24px oklch(0.65 0.25 230 / 0.1);  // Subtle neon blue glow
    
    list-style: none;
    margin: 0;
    padding: 0.5rem;
    
    // Mobile: Full width below parent
    width: 100%;
    margin-top: 0.5rem;
    
    // Desktop: Positioned dropdown
    @include from(lg) {
      position: absolute;
      top: 100%;
      left: 0;
      margin-top: 0.75rem;
      min-width: 220px;
      width: auto;
      z-index: 100;
    }
    
    // Hidden by default
    display: none;
    opacity: 0;
    transform: translateY(-10px);
    
    // Show when expanded
    &[aria-hidden="false"] {
      display: block;
      opacity: 1;
      transform: translateY(0);
      animation: dropdown-appear 0.3s ease;
    }
    
    @media (prefers-reduced-motion: reduce) {
      animation: none;
      transform: none;
    }
  }

  // Individual items within a dropdown menu
  &__dropdown-item {
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  // Dropdown links
  &__dropdown-link {
    @include genesis-synapse('navigate');
    @include genesis-cognition('discourse');
    
    min-height: 44px;
    width: 100%;
    padding: 0.75rem 1rem;
    
    display: flex;
    align-items: center;
    
    color: oklch(0.80 0.01 220);  // Light gray text
    text-decoration: none;
    border-radius: 8px;
    
    transition: all 0.3s ease;
    
    // Fix double-tap delay on mobile
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    
    &:hover,
    &:focus {
      color: oklch(0.99 0.005 90);  // White on hover
      background: oklch(0.18 0.01 250);  // Slightly lighter black
      transform: translateX(4px);
    }
    
    &[aria-current="page"] {
      color: oklch(0.99 0.005 90);  // White for current page
      background: oklch(0.15 0.01 250);  // Subtle background
      border-left: 3px solid oklch(0.65 0.25 230);  // Neon blue accent - purposeful
      font-weight: 600;
    }
  }
}

// Dropdown animation
@keyframes dropdown-appear {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

