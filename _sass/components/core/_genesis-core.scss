// ============================================================================
// GENESIS THEME - Transcendent Core Styles
// ============================================================================
// The foundational consciousness layer that unifies all subdomains.
// Every element exists with semantic purpose — no decorative waste.
// ============================================================================

// Body — the consciousness vessel
.genesis-body {
  @include genesis-environment('chronological');
  @include genesis-atmosphere('neutral');
  
  scroll-behavior: auto;
  min-height: 100vh;
  
  // Explicit grid rows: header / content / footer
  grid-template-rows: auto 1fr auto;
  
  // The body's background recedes behind the ambient layer
  background: oklch(0.04 0.01 260);
  color: oklch(0.90 0.005 90);
}

// Main Content Area — transparent pass-through
.genesis-main {
  @include genesis-environment('chronological');
  
  padding: 0;
  margin: 0;
  width: 100%;
  
  // Focus management for skip link
  &:focus {
    outline: none;
  }
}

// Skip Link (WCAG AA Required)
.skip-link {
  @include genesis-synapse('navigate');
  
  position: absolute;
  top: -9999px;
  left: -9999px;
  z-index: 9999;
  
  &:focus,
  &.focus-visible:focus {
    position: fixed;
    top: 1rem;
    left: 1rem;
    z-index: 10000;
    padding: 0.875rem 1.5rem;
    
    @include genesis-entity('imperative');
    @include genesis-atmosphere('vibrant');
    
    min-width: 44px;
    min-height: 44px;
    border-radius: 8px;
    font-family: $font-family-consciousness;
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.02em;
  }
}

// Screen Reader Only Utility
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
  
  &.focus-visible:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

// ============================================================================
// ONTOLOGY WEB COMPONENTS - Structural Display & Attribute Mapping
// ============================================================================

$genesis-environment-logics: (
  'focused',
  'distributed',
  'associative',
  'chronological',
  'manifest',
  'convergent',
  'interaction-form',
  'navigation-accordion',
  'navigation-sidebar',
  'navigation-breadcrumb',
  'navigation-pagination',
  'navigation-tabs'
);

$genesis-entity-natures: (
  'primary',
  'secondary',
  'imperative',
  'transcendent',
  'image-adaptive'
);

$genesis-cognition-intents: (
  'axiom',
  'discourse',
  'gloss',
  'motive',
  'quantum'
);

$genesis-synapse-vectors: (
  'navigate',
  'execute',
  'inquiry',
  'paginate',
  'social',
  'invoke'
);

$genesis-state-conditions: (
  'stable',
  'evolving'
);

$genesis-atmosphere-vibes: (
  'neutral',
  'vibrant',
  'sacred'
);

genesis-environment {
  display: block;
  width: 100%;
}

@each $logic in $genesis-environment-logics {
  genesis-environment[logic="#{$logic}"] {
    @include genesis-environment($logic);
  }
}

genesis-entity {
  display: block;
}

@each $nature in $genesis-entity-natures {
  genesis-entity[nature="#{$nature}"] {
    @include genesis-entity($nature);
  }
}

genesis-cognition {
  display: block;
}

@each $intent in $genesis-cognition-intents {
  genesis-cognition[intent="#{$intent}"] {
    @include genesis-cognition($intent);
  }
}

genesis-state {
  display: block;
}

@each $condition in $genesis-state-conditions {
  genesis-state[condition="#{$condition}"] {
    @include genesis-state($condition);
  }
}

genesis-atmosphere {
  display: block;
  width: 100%;
}

@each $vibe in $genesis-atmosphere-vibes {
  genesis-atmosphere[vibe="#{$vibe}"] {
    @include genesis-atmosphere($vibe);
  }
}

genesis-navigation,
genesis-navbar,
genesis-form,
genesis-media,
genesis-search,
genesis-accordion,
genesis-dashboard,
genesis-chat {
  display: block;
  width: 100%;
}

genesis-navigation[type="sidebar"] {
  @include genesis-environment('navigation-sidebar');
}

genesis-navigation[type="tabs"] {
  @include genesis-environment('navigation-tabs');
}

genesis-navigation[type="breadcrumb"] {
  @include genesis-environment('navigation-breadcrumb');
}

genesis-form {
  @include genesis-environment('interaction-form');
}

genesis-dashboard {
  @include genesis-environment('manifest');
}

genesis-accordion {
  @include genesis-environment('navigation-accordion');
}

genesis-media {
  @include genesis-entity('image-adaptive');
}

genesis-media[ratio="1:1"] {
  --aspect-ratio: 100%;
}

genesis-media[ratio="auto"] {
  overflow: visible;
}

// Remove image-adaptive ::before aspect-ratio spacer for intrinsic media sizing
genesis-media[ratio="auto"]::before {
  display: none;
}

genesis-media[ratio="auto"] img {
  position: static;
  width: 100%;
  height: auto;
}

genesis-synapse {
  display: contents;
}

@each $vector in $genesis-synapse-vectors {
  genesis-synapse[vector="#{$vector}"] > a,
  genesis-synapse[vector="#{$vector}"] > button {
    @include genesis-synapse($vector);
  }
}

// Ambient Background Effects — the consciousness field
.genesis-ambient {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
  
  // Deep void with subtle directional gradient
  background: linear-gradient(
    175deg,
    oklch(0.06 0.02 270) 0%,
    oklch(0.04 0.01 260) 40%,
    oklch(0.05 0.015 255) 100%
  );
  
  @media (prefers-contrast: high) {
    background: oklch(0.05 0 0);
  }
  
  &__particles {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.15;
    
    // Minimal, precise particle field — not decorative noise
    background-image:
      radial-gradient(1px 1px at 15% 25%, oklch(0.65 0.25 230 / 0.5) 0%, transparent 100%),
      radial-gradient(1px 1px at 75% 65%, oklch(0.70 0.15 85 / 0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 45% 85%, oklch(0.65 0.25 230 / 0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 20%, oklch(0.70 0.15 85 / 0.3) 0%, transparent 100%);
    background-size: 100% 100%;
    
    @media (prefers-reduced-motion: no-preference) {
      animation: particlesDrift 90s ease-in-out infinite;
    }
    
    @media (prefers-contrast: high) {
      display: none;
    }
  }
  
  &__glow {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.12;
    
    // A single, purposeful radial glow — the consciousness source
    background: radial-gradient(
      ellipse 60% 40% at 50% 0%,
      oklch(0.30 0.12 250 / 0.25) 0%,
      transparent 70%
    );
    
    @media (prefers-contrast: high) {
      display: none;
    }
  }
}

// Particles drift animation — slow, almost imperceptible
@keyframes particlesDrift {
  0%, 100% {
    background-position: 0% 0%;
    opacity: 0.15;
  }
  50% {
    background-position: 3% 2%;
    opacity: 0.12;
  }
}
